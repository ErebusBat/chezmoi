#!/bin/zsh
# OpenClaw CLI Plugin
# Ensures correct node version and loads completion

# Load nvm if not already loaded
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

# Use Node 22 for OpenClaw
nvm use 22 >/dev/null 2>&1

# Add openclaw to PATH if not already there
if [[ ! "$PATH" == *"openclaw"* ]]; then
  export PATH="$PATH:$HOME/.nvm/versions/node/v22.22.0/bin"
fi

# Load OpenClaw completion (only in interactive shells)
if [[ -o interactive ]] && command -v openclaw &>/dev/null; then
  source <(openclaw completion --shell zsh)
fi
