#!/bin/zsh
# Make sure that mise is there and versioning works
if command -v mise &> /dev/null; then
  eval $(mise activate --shims)
fi

cd $HOME/src/erebusbat/dlog-ruby/

ARGS=$*

# Shortcut to run bundler
if [[ $1 == "bundle" ]] && [[ $# -eq 1 ]]; then
  bundle
  exit 0
elif [[ $# -eq 0 ]]; then
  vared -p "Log Entry: " -c ARGS

  if [[ -z $ARGS ]]; then
    echo "***FATAL: Nothing entered"
    exit 1
  fi
fi

bin/dlog $ARGS
